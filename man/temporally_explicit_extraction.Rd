% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/temporally_explicit_extraction.R
\name{temporally_explicit_extraction}
\alias{temporally_explicit_extraction}
\title{Extract time-aligned raster values at points and compute scaling}
\usage{
temporally_explicit_extraction(
  points_sp,
  raster_dir,
  variable_patterns,
  time_cols,
  xcol = NULL,
  ycol = NULL,
  points_crs = NULL,
  output_dir,
  output_prefix = "temp_explicit_df",
  save_raw = TRUE,
  save_scaled = TRUE,
  save_scaling_params = TRUE
)
}
\arguments{
\item{points_sp}{A \code{sf} object, a \code{SpatialPointsDataFrame}, a path
to a CSV/SHP/GEOJSON/GPKG, or a data.frame with coordinate columns
(see \code{xcol}, \code{ycol}, \code{points_crs}).}

\item{raster_dir}{Directory containing source rasters (.tif).}

\item{variable_patterns}{Named character vector mapping variable names to
  filename patterns. Time placeholders (e.g., \code{YEAR}, \code{MONTH}) must
  match \code{time_cols}. Static variables have no placeholders.

  **Examples of properly formatted raster patterns:**
  \itemize{
    \item \code{c("bio1" = "bio1_YEAR")}
    \item \code{c("temp" = "temp_YEAR_MONTH")}
    \item \code{c("elevation" = "elevation")}  (static)
    \item \code{c("ndvi" = "NDVI_YEAR")}  (case-insensitive)
  }}

\item{time_cols}{Character vector of time column names present in the point
data (e.g., \code{c("YEAR")}, \code{c("YEAR","MONTH")}).}

\item{xcol, ycol}{Optional coordinate column names when reading CSV or
data.frame inputs.}

\item{points_crs}{Optional CRS string when reading CSV or data.frame inputs.}

\item{output_dir}{Directory to write outputs.}

\item{output_prefix}{Prefix for output filenames.}

\item{save_raw}{Logical; write raw extracted values CSV.}

\item{save_scaled}{Logical; write z-scaled values CSV.}

\item{save_scaling_params}{Logical; write CSV of per-variable means and SDs.}
}
\description{
For each unique combination in \code{time_cols}, matches rasters by
\code{variable_patterns}, extracts values at \code{points_sp}, writes raw
values, per-variable scaling parameters (mean, sd) for use in \code{\link{scale_rasters}}, and a
table of z-scaled values.
}
\details{
Dynamic variables are detected when patterns contain placeholders matching
names in \code{time_cols}. Static variables are extracted once. Raster files
are matched by substituting time values into pattern placeholders and
requiring all components to appear in the filename.
}
