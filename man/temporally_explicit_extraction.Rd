% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/temporally_explicit_extraction.R
\name{temporally_explicit_extraction}
\alias{temporally_explicit_extraction}
\title{Extract Time-Aligned Environmental Values at Species Occurrences}
\usage{
temporally_explicit_extraction(
  points_sp,
  raster_dir,
  variable_patterns,
  time_cols,
  xcol = NULL,
  ycol = NULL,
  points_crs = NULL,
  output_dir,
  output_prefix = "temp_explicit_df",
  save_raw = TRUE,
  save_scaled = TRUE,
  save_scaling_params = TRUE
)
}
\arguments{
\item{points_sp}{sf object, SpatialPointsDataFrame, file path to
.csv/.shp/.geojson/.gpkg, or data frame with coordinate columns.}

\item{raster_dir}{Character. Directory containing source raster files (.tif).}

\item{variable_patterns}{Named character vector mapping variable names to
filename patterns. Time placeholders (e.g., YEAR, MONTH) must match
time_cols. Static variables have no placeholders.}

\item{time_cols}{Character vector of time column names present in the point
data (e.g., c("YEAR"), c("YEAR", "MONTH")).}

\item{xcol}{Character. Coordinate column name when reading CSV or data frame
inputs. Optional.}

\item{ycol}{Character. Coordinate column name when reading CSV or data frame
inputs. Optional.}

\item{points_crs}{Character or CRS object. CRS when reading CSV or data frame
inputs. Optional.}

\item{output_dir}{Character. Directory to write output files.}

\item{output_prefix}{Character. Prefix for output filenames. Default is
"temp_explicit_df".}

\item{save_raw}{Logical. If TRUE, writes raw extracted values CSV. If FALSE,
skips raw values output. Default is TRUE.}

\item{save_scaled}{Logical. If TRUE, writes z-scaled values CSV. If FALSE,
skips scaled values output. Default is TRUE.}

\item{save_scaling_params}{Logical. If TRUE, writes CSV of per-variable means
and standard deviations. If FALSE, skips scaling parameters output. Default
is TRUE.}
}
\description{
Preprocessing function that extracts raster values to species occurrence
records based on temporal components. Matches environmental layers to
occurrence timestamps and computes scaling parameters for standardization.
}
\details{
Dynamic variables are detected when patterns contain placeholders matching
time_cols. Static variables are extracted once. Raster files are matched by
substituting time values into pattern placeholders.

Output CSV files are written to output_dir containing raw values, scaled
values, and scaling parameters.

Scaling parameters (mean and standard deviation) are computed across all
occurrence records for each variable. These parameters should be used with
\code{\link{scale_rasters}} to standardize prediction layers.
}
\examples{
\dontrun{
variable_patterns <- c(
  "bio1" = "bio1_YEAR",
  "temp" = "temp_YEAR_MONTH",
  "elevation" = "elevation"
)

temporally_explicit_extraction(
  points_sp = "occurrences.csv",
  raster_dir = "environmental_layers/",
  variable_patterns = variable_patterns,
  time_cols = c("YEAR", "MONTH"),
  xcol = "longitude",
  ycol = "latitude",
  points_crs = "EPSG:4326",
  output_dir = "extracted_values/"
)
}

}
\seealso{
Preprocessing: \code{\link{spatiotemporal_rarefication}},
\code{\link{scale_rasters}}, \code{\link{spatiotemporal_partition}}
}
