% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/spatiotemporal_partition.R
\name{spatiotemporal_partition}
\alias{spatiotemporal_partition}
\title{Spatiotemporal Cross-Validation Partitioning}
\usage{
spatiotemporal_partition(
  reference_shapefile_path,
  points_file_path,
  time_col = NULL,
  xcol = NULL,
  ycol = NULL,
  points_crs = NULL,
  total_folds = 4,
  n_temporal = 2,
  n_spatial = 8,
  blocking_priority = NULL,
  max_imbalance = 0.05,
  generate_plots = TRUE,
  output_file = NULL
)
}
\arguments{
\item{reference_shapefile_path}{Character or sf object. Path to study area
polygon or sf polygon object.}

\item{points_file_path}{Character, sf object, or data frame. Path to
occurrence data (.csv/.shp/.geojson/.gpkg) or spatial object.}

\item{time_col}{Character. Column name for temporal blocking. Default is
NULL for spatial-only partitioning.}

\item{xcol}{Character. Coordinate column name when reading CSV or data frame.
Optional.}

\item{ycol}{Character. Coordinate column name when reading CSV or data frame.
Optional.}

\item{points_crs}{Character or CRS object. CRS for input points if not
embedded. Optional.}

\item{total_folds}{Integer. Total number of folds for cross-validation.
Default is 4.}

\item{n_temporal}{Integer. Number of temporal blocks. Default is 2.}

\item{n_spatial}{Integer. Number of spatial blocks. Default is 8.}

\item{blocking_priority}{Character. One of "balanced", "spatial", or
"temporal". Determines fold assignment strategy. Currently only "balanced"
is fully implemented.}

\item{max_imbalance}{Numeric. Maximum allowed fold size imbalance as a
proportion. Default is 0.05.}

\item{generate_plots}{Logical. If TRUE, draws summary plots of fold
distribution. If FALSE, skips plot generation. Default is TRUE.}

\item{output_file}{Character. Optional path to save results as .rds file.
Default is NULL.}
}
\value{
A list containing:
\itemize{
  \item folds: data frame with fold assignments
  \item points_sf: sf object of occurrence points
  \item voronoi: sf object of Voronoi polygons
  \item summary: data frame of fold statistics
  \item plots: list of ggplot objects
}
}
\description{
Preprocessing function that partitions species occurrence data into
spatially and temporally balanced folds for cross-validation. Generates
Voronoi tessellations for spatial blocks and distributes points into folds
based on user-specified priorities.
}
\details{
The function creates spatial blocks using k-means clustering and optional
temporal blocks from time_col. Points are distributed into folds based on
blocking_priority to balance spatial and temporal coverage.

Partitioned data are used as input for \code{\link{build_hypervolume_models}}
to ensure spatially and temporally independent cross-validation.
}
\examples{
\dontrun{
partition_results <- spatiotemporal_partition(
  reference_shapefile_path = "study_area.shp",
  points_file_path = "occurrences.csv",
  time_col = "Year",
  xcol = "longitude",
  ycol = "latitude",
  points_crs = "EPSG:4326",
  total_folds = 4,
  n_temporal = 2,
  n_spatial = 8,
  total_folds = 5,
  blocking_priority = "balanced"
)
}

}
\seealso{
Preprocessing: \code{\link{spatiotemporal_rarefication}},
\code{\link{temporally_explicit_extraction}}

Modeling: \code{\link{build_hypervolume_models}}
}
